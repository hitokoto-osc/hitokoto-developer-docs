import{_ as s,o as n,c as a,Q as p}from"./chunks/framework.2cbe44b1.js";const u=JSON.parse('{"title":"éƒ¨ç½²å®ä¾‹","description":"","frontmatter":{},"headers":[],"relativePath":"sentence/deploy.md","filePath":"sentence/deploy.md","lastUpdated":1671333382000}'),l={name:"sentence/deploy.md"},o=p(`<h1 id="éƒ¨ç½²å®ä¾‹" tabindex="-1">éƒ¨ç½²å®ä¾‹ <a class="header-anchor" href="#éƒ¨ç½²å®ä¾‹" aria-label="Permalink to &quot;éƒ¨ç½²å®ä¾‹&quot;">â€‹</a></h1><blockquote><p>è‡ª <code>v1.5.0</code> æ‚¨å¯ä»¥éƒ¨ç½²æ‚¨è‡ªå·±çš„å®ä¾‹ï¼Œè¿™ä¸ªæ–¹æ¡ˆååˆ†é€‚åˆè®¿é—®é‡å¤§ï¼Œç«™ç‚¹ç§å¯†æ€§é«˜çš„éœ€æ±‚ã€‚<br><strong>è¯·æ³¨æ„ï¼š</strong> å®ä¾‹ä¸­å­˜åœ¨ <strong>é¥æµ‹</strong>æœåŠ¡ï¼Œå°†ä¼šæ”¶é›†å®ä¾‹çš„æ€§èƒ½ã€é”™è¯¯ã€çŠ¶æ€çŠ¶å†µæ–¹é¢çš„æ•°æ®ï¼Œæ‚¨å¯ä»¥è‡ªç”±é€‰æ‹©å…³é—­é¥æµ‹åŠŸèƒ½ã€‚</p></blockquote><h2 id="ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²" tabindex="-1">ä¼ ç»Ÿæ–¹å¼éƒ¨ç½² <a class="header-anchor" href="#ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²" aria-label="Permalink to &quot;ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²&quot;">â€‹</a></h2><h3 id="å®‰è£…ä¾èµ–" tabindex="-1">å®‰è£…ä¾èµ– <a class="header-anchor" href="#å®‰è£…ä¾èµ–" aria-label="Permalink to &quot;å®‰è£…ä¾èµ–&quot;">â€‹</a></h3><p>é¦–å…ˆæ‚¨å¾—ç¡®ä¿æ‚¨çš„ç¯å¢ƒä¸­å­˜åœ¨ <code>Redis</code>ï¼Œ<code>Node.js</code>ï¼Œ<code>yarn</code>ã€‚ç”±äºç½‘ä¸Šæ–¹æ³•ä¼—å¤šï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ å¦‚æœæ‚¨æ˜¯å°ç™½ï¼Œä¸æ˜¯å¾ˆæ˜ç™½æ€ä¹ˆå®‰è£…ç¯å¢ƒï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„ NodeBB å®‰è£…æ–‡æ¡£ä¸­ <strong>é…ç½®ç¯å¢ƒ</strong> çš„éƒ¨åˆ†ï¼š<a href="https://docs.nodebb-cn.org" target="_blank" rel="noreferrer">https://docs.nodebb-cn.org</a></p><p><strong>è¯·ç¡®è®¤ï¼šæ‚¨çš„ yarn ç‰ˆæœ¬æ˜¯å¦å¤§äºæˆ–ç­‰äº 1.22.4ï¼Œå¦‚æœä¸æ˜¯â€”â€”è¯·æ›´æ–°ã€‚å¦åˆ™ï¼Œé¡¹ç›®å°†æ— æ³•æ­£ç¡®å®‰è£…å¯åŠ¨ã€‚</strong></p><h3 id="å…‹éš†é¡¹ç›®" tabindex="-1">å…‹éš†é¡¹ç›® <a class="header-anchor" href="#å…‹éš†é¡¹ç›®" aria-label="Permalink to &quot;å…‹éš†é¡¹ç›®&quot;">â€‹</a></h3><p>åœ¨ä½ æƒ³è¦çš„ä½ç½®å…‹éš†æœ¬é¡¹ç›®</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/hitokoto-osc/hitokoto-api.git</span></span>
<span class="line"><span style="color:#6A737D;"># å¦‚æœæ‚¨æˆ–æ‚¨çš„æœºå™¨å¤„äºå›½å†…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªåœ°å€ä»£æ›¿ï¼šhttps://gitee.com/hitokoto-osc/hitokoto-api.git</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/hitokoto-osc/hitokoto-api.git</span></span>
<span class="line"><span style="color:#6A737D;"># å¦‚æœæ‚¨æˆ–æ‚¨çš„æœºå™¨å¤„äºå›½å†…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªåœ°å€ä»£æ›¿ï¼šhttps://gitee.com/hitokoto-osc/hitokoto-api.git</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="å®‰è£…åŒ…" tabindex="-1">å®‰è£…åŒ… <a class="header-anchor" href="#å®‰è£…åŒ…" aria-label="Permalink to &quot;å®‰è£…åŒ…&quot;">â€‹</a></h3><p>Node.js ç¨‹åºé€šå¸¸éœ€è¦å¤§é‡é€šè¿‡åŒ…ç®¡ç†å®‰è£…çš„åŒ…æ¥è¿è¡Œã€‚æœ¬ç¨‹åºä¹Ÿä¸ä¾‹å¤–ï¼Œå› æ­¤ï¼Œæ‚¨éœ€è¦åƒè¿™æ ·å®‰è£…åŒ…ï¼š</p><blockquote><p><strong>è¯·æ³¨æ„ï¼š</strong> æœ¬é¡¹ç›®è¦æ±‚ <code>Node.js</code> ç‰ˆæœ¬è‡³å°‘ä¸º 14 ï¼ˆå½“å‰æœ€æ–°çš„ LTS ç‰ˆæœ¬ï¼‰ï¼› è‡ª <code>v1.6.0</code> èµ·ï¼Œé¡¹ç›®è¦æ±‚ä½¿ç”¨ yarn berry ç®¡ç†åŒ…ä¾èµ–ã€‚</p></blockquote><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># ä¸ºäº†é˜²æ­¢æ„å¤–ï¼Œæˆ‘ä»¬éœ€è¦å°†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„åŒ…éƒ½å®‰è£…ã€‚å¦‚æœæ‚¨ç†Ÿæ‚‰æœ¬ç¨‹åºçš„è¯ï¼Œå¯ä»¥åªå®‰è£…ç”Ÿäº§ç¯å¢ƒçš„åŒ…ç›´æ¥éƒ¨ç½²ã€‚</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># ä¸ºäº†é˜²æ­¢æ„å¤–ï¼Œæˆ‘ä»¬éœ€è¦å°†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„åŒ…éƒ½å®‰è£…ã€‚å¦‚æœæ‚¨ç†Ÿæ‚‰æœ¬ç¨‹åºçš„è¯ï¼Œå¯ä»¥åªå®‰è£…ç”Ÿäº§ç¯å¢ƒçš„åŒ…ç›´æ¥éƒ¨ç½²ã€‚</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="å¯åŠ¨ç¨‹åº" tabindex="-1">å¯åŠ¨ç¨‹åº <a class="header-anchor" href="#å¯åŠ¨ç¨‹åº" aria-label="Permalink to &quot;å¯åŠ¨ç¨‹åº&quot;">â€‹</a></h3><p>å—¯ï¼Œè®©æˆ‘ä»¬è¯•ä¸€ä¸‹èƒ½ä¸èƒ½å¯åŠ¨ï¼š</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># è®©æˆ‘ä»¬ä½¿ç”¨å¼€å‘æ¨¡å¼çœ‹çœ‹èƒ½ä¸èƒ½è·‘å¾—èµ·æ¥ï¼Œç¨‹åºä¼šè‡ªåŠ¨ç”Ÿæˆé»˜è®¤çš„é…ç½®æ–‡ä»¶ã€‚æœ‰å…³é…ç½®æ–‡ä»¶çš„é…ç½®ï¼Œæˆ‘ä»¬å°†åœ¨ç¨åä¸€èŠ‚è¯´æ˜ã€‚</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># è®©æˆ‘ä»¬ä½¿ç”¨å¼€å‘æ¨¡å¼çœ‹çœ‹èƒ½ä¸èƒ½è·‘å¾—èµ·æ¥ï¼Œç¨‹åºä¼šè‡ªåŠ¨ç”Ÿæˆé»˜è®¤çš„é…ç½®æ–‡ä»¶ã€‚æœ‰å…³é…ç½®æ–‡ä»¶çš„é…ç½®ï¼Œæˆ‘ä»¬å°†åœ¨ç¨åä¸€èŠ‚è¯´æ˜ã€‚</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä½ ä¼šçœ‹åˆ°å±å¹•åœ¨åˆ·åˆ·åˆ·å¾—åˆ·æ—¥è®°ï¼Œå½“ä½ çœ‹åˆ°ç±»ä¼¼è¿™æ ·ä¸€æ¡æ—¶ï¼Œæ„å‘³ç€ç¨‹åºèƒ½æˆåŠŸè¿è¡Œï¼š<code>info: [core] Web Server is started, listening on port: 8000</code></p><p>å¦‚æœç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œè¯·æ£€æŸ¥ä¸€ä¸‹å“ªå„¿æ²¡æå¥½ï¼ˆä¾‹å¦‚ï¼šæ²¡å¯åŠ¨ redisï¼ŒNode.js ç‰ˆæœ¬è¿‡ä½ï¼‰ã€‚å¦‚æœè‡ªå·±æä¸å®šçš„è¯ï¼Œå¯ä»¥åŠ å…¥æˆ‘ä»¬çš„å¼€å‘è€…ç¾¤è®¨è®ºä¸€ä¸‹ã€‚å¦‚æœæ‚¨ç¡®ä¿¡æ˜¯ç¨‹åºçš„é—®é¢˜çš„è¯ï¼Œè¯·å°è¯•æ›´æ–°ç¨‹åºã€‚å¦‚æœå·²ç»æœ€æ–°ï¼Œæ¬¢è¿å‘æˆ‘ä»¬æäº¤ issuesã€‚</p><h3 id="æŒä¹…åŒ–è¿›ç¨‹" tabindex="-1">æŒä¹…åŒ–è¿›ç¨‹ <a class="header-anchor" href="#æŒä¹…åŒ–è¿›ç¨‹" aria-label="Permalink to &quot;æŒä¹…åŒ–è¿›ç¨‹&quot;">â€‹</a></h3><p>ä¸ºäº†ä½¿æˆ‘ä»¬çš„ç¨‹åºèƒ½é•¿æ—¶é—´ç¨³å®šè¿è¡Œï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä¸€ä¸ªè¿›ç¨‹ç®¡ç†å·¥å…·æ¥ç®¡ç†è¿›ç¨‹ã€‚æœ¬ä¾‹ç”¨çš„æ˜¯ <code>pm2</code>ã€‚æœ‰å…³ <code>pm2</code> çš„ä»‹ç»ç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°ï¼Œåªç®€å•è®²è®²æ€ä¹ˆä½¿ç”¨ï¼ˆè¿ç”¨äºæœ¬æ¥å£ï¼‰</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… <code>pm2</code>ã€‚</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">i</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-g</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># ç”±äºé¡¹ç›®å†…é»˜è®¤ç¯å¢ƒä¸º yarn v2ï¼Œä¸ºäº†é¿å…å¹²æ‰°ï¼Œè¿™é‡Œé‡‡ç”¨ NPM å®‰è£…</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">i</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-g</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pm2</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># ç”±äºé¡¹ç›®å†…é»˜è®¤ç¯å¢ƒä¸º yarn v2ï¼Œä¸ºäº†é¿å…å¹²æ‰°ï¼Œè¿™é‡Œé‡‡ç”¨ NPM å®‰è£…</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é…ç½® <code>pm2</code> è‡ªå¯åŠ¨</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">startup</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">startup</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç”±äºé¡¹ç›®å·²ç»æä¾›äº†é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨é…ç½®æ–‡ä»¶å¯åŠ¨è¯­å¥æ¥å£æœåŠ¡</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ecosystem.config.js</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--env</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">production</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ecosystem.config.js</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--env</span><span style="color:#24292E;"> </span><span style="color:#032F62;">production</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¿å­˜æŒä¹…åŒ–åˆ—è¡¨</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">pm2</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">save</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">pm2</span><span style="color:#24292E;"> </span><span style="color:#032F62;">save</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="ä½¿ç”¨-docker-è¿è¡Œ" tabindex="-1">ä½¿ç”¨ Docker è¿è¡Œ <a class="header-anchor" href="#ä½¿ç”¨-docker-è¿è¡Œ" aria-label="Permalink to &quot;ä½¿ç”¨ Docker è¿è¡Œ&quot;">â€‹</a></h2><p>Docker æ˜¯ç›®å‰éå¸¸æµè¡Œçš„å®¹å™¨ç®¡ç†å·¥å…·ï¼Œèƒ½å¾ˆæ–¹ä¾¿ï¼Œç®€å•å¾—æ“ä½œå®ä¾‹ã€‚Docker çš„ç›¸å…³ç©æ³•æˆ‘ä»¬å°±ä¸å±•å¼€äº†ï¼Œæˆ‘ä»¬å°±ä»‹ç»æœ€æ–¹ä¾¿çš„ç”¨æ³•ã€‚å¦‚æœæ‚¨æ˜¯å°ç™½çš„è¯ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªæ–¹æ³•ã€‚</p><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¯å¢ƒä¸­å®‰è£…å¥½ Redisã€‚å¦‚æœä¸ä¼šçš„è¯ï¼Œè¯·çœ‹ä¸ŠèŠ‚çš„é‚£ä¸ªåœ°å€çš„æ•™ç¨‹æˆ–è€…ç½‘ä¸Šæœä¸€ä¸‹ã€‚</p><p>ç„¶å...</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">-v </span><span style="color:#9ECBFF;">/path/to/your/data/dir:/usr/src/app/data</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\ </span><span style="color:#9ECBFF;">#</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">è¯·æ›¿æ¢</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/path/to/your/data/dir</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ä¸ºæ‚¨æƒ³å­˜å‚¨æ¥å£æŒä¹…åŒ–æ•°æ®çš„ç›®å½•ç»å¯¹ä½ç½®</span></span>
<span class="line"><span style="color:#B392F0;">--network</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">host</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">\\</span></span>
<span class="line"><span style="color:#E1E4E8;">hitokoto/api:latest</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">-v </span><span style="color:#032F62;">/path/to/your/data/dir:/usr/src/app/data</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\ </span><span style="color:#032F62;">#</span><span style="color:#24292E;"> </span><span style="color:#032F62;">è¯·æ›¿æ¢</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/path/to/your/data/dir</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ä¸ºæ‚¨æƒ³å­˜å‚¨æ¥å£æŒä¹…åŒ–æ•°æ®çš„ç›®å½•ç»å¯¹ä½ç½®</span></span>
<span class="line"><span style="color:#6F42C1;">--network</span><span style="color:#24292E;"> </span><span style="color:#032F62;">host</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">hitokoto/api:latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å—¯ï¼Œå¯åŠ¨å®Œæ¯•ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼Ÿ</p><p>å…¶ä»–å¯åŠ¨æ–¹å¼ä½ å¯ä»¥è‡ªå·±æ‘¸ç´¢ä¸€ä¸‹ï¼Œæ¯”å¦‚è¯´ï¼Œä¸ç”¨ host ç½‘ç»œæ€ä¹ˆè¿è¡Œã€‚</p><h3 id="ä½¿ç”¨-docker-compose-å¯åŠ¨æœåŠ¡" tabindex="-1">ä½¿ç”¨ docker-compose å¯åŠ¨æœåŠ¡ <a class="header-anchor" href="#ä½¿ç”¨-docker-compose-å¯åŠ¨æœåŠ¡" aria-label="Permalink to &quot;ä½¿ç”¨ docker-compose å¯åŠ¨æœåŠ¡&quot;">â€‹</a></h3><p>é¡¹ç›®ä¹Ÿæä¾›äº† <code>docker-compose</code> æ–‡ä»¶ï¼ˆåœ¨ä»“åº“ä¸­ï¼‰ï¼Œä¸ºäº†èŠ‚çº¦æ‚¨çš„æ—¶é—´ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸‹è¿™ä»½é…ç½®ï¼š</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">version</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;3&#39;</span></span>
<span class="line"><span style="color:#85E89D;">networks</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">hitokoto_api</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">driver</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">bridge</span></span>
<span class="line"></span>
<span class="line"><span style="color:#85E89D;">services</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">hitokoto_api</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">networks</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">hitokoto_api</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">hitokoto/api:release</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">container_name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">hitokoto_api</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">hostname</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">hitokoto_api</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">environment</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">NODE_ENV</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">production</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># æœåŠ¡é…ç½®</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">url</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">https://v1.hitokoto.cn</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># è¯·ä¿®æ”¹ä¸ºæ‚¨æƒ³è¦éƒ¨ç½²çš„åŸŸå</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">api_name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">sh-01-X23Hwoc</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># æ”¹ä¸€ä¸ªå¥½å¬çš„æ ‡è¯†å§</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">requests.hosts</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;[&#39;v1.hitokoto.cn&#39;]&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># æ”¹æˆä½ æƒ³ç»Ÿè®¡çš„ä¸»æœºååˆ—è¡¨</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">redis.host</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">redis</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># Redis è¿æ¥åœ°å€ï¼Œå¦‚æœæ‚¨ä½¿ç”¨æœ¬æ–‡ä»¶æä¾›çš„ Redis çš„è¯æ‚¨æ— éœ€ä¿®æ”¹æ­¤é¡¹</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">redis.port</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">6379</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># Redis è¿æ¥ç«¯å£</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># redis.password:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;"># redis.database: 0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">ports</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">8000:8000</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">links</span><span style="color:#E1E4E8;">: </span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">redis</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">restart</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">unless-stopped</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">: </span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">./etc/api:/usr/src/app/data</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">redis</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">networks</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">hitokoto_api</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">image</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">redis</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">restart</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">unless-stopped</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">container_name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">redis</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">hostname</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">redis</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">volumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">./etc/redis.conf:/etc/redis/redis.conf</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># ä¸€å®šè¦è®°å¾—æŠŠ redis.conf å…ˆæ”¾åœ¨è¿™ä¸ªä½ç½®å“¦</span></span>
<span class="line"><span style="color:#E1E4E8;">      - </span><span style="color:#9ECBFF;">./data/redis:/data</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">command</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">redis-server /etc/redis/redis.conf</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># ports:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#  - 6379:6379 # å¦‚æœæœ‰å¿…è¦è¯·å–æ¶ˆæ³¨é‡Šæœ¬è¡Œ</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">version</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;3&#39;</span></span>
<span class="line"><span style="color:#22863A;">networks</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">hitokoto_api</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">driver</span><span style="color:#24292E;">: </span><span style="color:#032F62;">bridge</span></span>
<span class="line"></span>
<span class="line"><span style="color:#22863A;">services</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">hitokoto_api</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">networks</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">hitokoto_api</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">hitokoto/api:release</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">container_name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">hitokoto_api</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">hostname</span><span style="color:#24292E;">: </span><span style="color:#032F62;">hitokoto_api</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">environment</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">NODE_ENV</span><span style="color:#24292E;">: </span><span style="color:#032F62;">production</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;"># æœåŠ¡é…ç½®</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">url</span><span style="color:#24292E;">: </span><span style="color:#032F62;">https://v1.hitokoto.cn</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># è¯·ä¿®æ”¹ä¸ºæ‚¨æƒ³è¦éƒ¨ç½²çš„åŸŸå</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">api_name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">sh-01-X23Hwoc</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># æ”¹ä¸€ä¸ªå¥½å¬çš„æ ‡è¯†å§</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">requests.hosts</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;[&#39;v1.hitokoto.cn&#39;]&quot;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># æ”¹æˆä½ æƒ³ç»Ÿè®¡çš„ä¸»æœºååˆ—è¡¨</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">redis.host</span><span style="color:#24292E;">: </span><span style="color:#032F62;">redis</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># Redis è¿æ¥åœ°å€ï¼Œå¦‚æœæ‚¨ä½¿ç”¨æœ¬æ–‡ä»¶æä¾›çš„ Redis çš„è¯æ‚¨æ— éœ€ä¿®æ”¹æ­¤é¡¹</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">redis.port</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">6379</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># Redis è¿æ¥ç«¯å£</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;"># redis.password:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;"># redis.database: 0</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">ports</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">8000:8000</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">links</span><span style="color:#24292E;">: </span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">redis</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">restart</span><span style="color:#24292E;">: </span><span style="color:#032F62;">unless-stopped</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">: </span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">./etc/api:/usr/src/app/data</span></span>
<span class="line"><span style="color:#24292E;">    </span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">redis</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">networks</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">hitokoto_api</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">image</span><span style="color:#24292E;">: </span><span style="color:#032F62;">redis</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">restart</span><span style="color:#24292E;">: </span><span style="color:#032F62;">unless-stopped</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">container_name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">redis</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">hostname</span><span style="color:#24292E;">: </span><span style="color:#032F62;">redis</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">volumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">./etc/redis.conf:/etc/redis/redis.conf</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># ä¸€å®šè¦è®°å¾—æŠŠ redis.conf å…ˆæ”¾åœ¨è¿™ä¸ªä½ç½®å“¦</span></span>
<span class="line"><span style="color:#24292E;">      - </span><span style="color:#032F62;">./data/redis:/data</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">command</span><span style="color:#24292E;">: </span><span style="color:#032F62;">redis-server /etc/redis/redis.conf</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># ports:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">#  - 6379:6379 # å¦‚æœæœ‰å¿…è¦è¯·å–æ¶ˆæ³¨é‡Šæœ¬è¡Œ</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>ç„¶åæˆ‘ä»¬åªéœ€è¦æ–°å»ºä¸ªç›®å½•ï¼Œæ¯”å¦‚è¯´ <code>hitokoto_api</code>:</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">mkdir hitokoto_api &amp;&amp; cd hitokoto_api</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">mkdir hitokoto_api &amp;&amp; cd hitokoto_api</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¯åŠ¨æœåŠ¡ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">docker-compose up -d</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">docker-compose up -d</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ğŸ˜„ æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼Ÿå˜»å˜»ã€‚</p><h2 id="é…ç½®æ–‡ä»¶" tabindex="-1">é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;é…ç½®æ–‡ä»¶&quot;">â€‹</a></h2><p>ä»¥ä¸‹æ˜¯å¯¹å¸¸ç”¨é…ç½®çš„ç®€å•ä»‹ç»ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¯·å»é™¤æ‰æ³¨è§£éƒ¨åˆ†ã€‚</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># è‡ª v1.6.0 èµ·ä½¿ç”¨ yaml æ ¼å¼çš„é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># æœåŠ¡åç§°ï¼Œä¾‹å¦‚ï¼šhitokoto</span></span>
<span class="line"><span style="color:#85E89D;">url</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># æœåŠ¡åœ°å€ï¼Œä¾‹å¦‚ï¼šhttps://v1.hitokoto.cn</span></span>
<span class="line"><span style="color:#85E89D;">api_name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># æœåŠ¡è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼šcd-01-demo</span></span>
<span class="line"><span style="color:#85E89D;">server</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;"># é…ç½® HTTP æœåŠ¡çš„ä¿¡æ¯</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">host</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">127.0.0.1</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># ç›‘å¬çš„åœ°å€</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">port</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;8000&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># ç›‘å¬çš„ç«¯å£</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">compress_body</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># æ˜¯å¦ä½¿ç”¨ GZIP å‹ç¼©</span></span>
<span class="line"><span style="color:#85E89D;">redis</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;"># é…ç½® Redis</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">host</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">127.0.0.1</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># Redis ä¸»æœºå</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">port</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">6379</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># Redis ç«¯å£</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">password</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># Redis å¯†ç </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">database</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># Redis æ•°æ®åº“</span></span>
<span class="line"><span style="color:#85E89D;">sentences_ab_switcher</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;"># æœ¬èŠ‚æ˜¯æœåŠ¡ AB å¼‚æ­¥æ›´æ–°çš„é…ç½®ï¼Œå¦‚æœæ‚¨ä¸çŸ¥é“è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¯·ä¿æŒé»˜è®¤</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">a</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># a çŠ¶æ€å¯¹åº”çš„ redis æ•°æ®åº“</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">b</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># b çŠ¶æ€å¯¹åº”çš„ redis æ•°æ®åº“</span></span>
<span class="line"><span style="color:#85E89D;">log_level</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">info</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># æœ¬èŠ‚å·²åºŸå¼ƒï¼Œè¾“å‡ºåˆ°æ—¥è®°æ–‡ä»¶çš„ä¸€å¾‹ä¸º Errorï¼›è¾“å‡ºåˆ°ç»ˆç«¯ç”± flag \`-D\` æ§åˆ¶ã€‚</span></span>
<span class="line"><span style="color:#85E89D;">remote_sentences_url</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">https://cdn.jsdelivr.net/gh/hitokoto-osc/sentences-bundle@latest/</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># è¯­å¥åº“åœ°å€ï¼Œé€šå¸¸é»˜è®¤å³å¯ã€‚å¦‚æœæ‚¨æƒ³ä½¿ç”¨æ‚¨è‡ªå·±æ‰“åŒ…éƒ¨ç½²çš„è¯­å¥åº“ï¼Œæ‚¨å¯ä»¥ä¿®æ”¹æ­¤é¡¹</span></span>
<span class="line"><span style="color:#85E89D;">workers</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># å¯åŠ¨ Worker æ•°ç›®ã€‚0 è¡¨ç¤ºå¯åŠ¨å’Œ CPU æ ¸å¿ƒæ•°ç›¸åŒæ•°é‡çš„ Worker</span></span>
<span class="line"><span style="color:#85E89D;">requests</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">enabled</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># æ˜¯å¦å¯ç”¨è¯·æ±‚æ•°ç›®ç»Ÿè®¡</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">hosts</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;"># éœ€è¦å•ç‹¬ç»Ÿè®¡çš„ä¸»æœºå</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#9ECBFF;">v1.hitokoto.cn</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#9ECBFF;">international.v1.hitokoto.cn</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#9ECBFF;">api.a632079.me</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#9ECBFF;">api.hitokoto.cn</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#9ECBFF;">sslapi.hitokoto.cn</span></span>
<span class="line"><span style="color:#85E89D;">telemetry</span><span style="color:#E1E4E8;">: </span><span style="color:#6A737D;"># é¥æµ‹æœåŠ¡</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">performance</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># æ€§èƒ½ç›‘æ§</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">error</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># é”™è¯¯æŠ¥å‘Š</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">usage</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;"># ä½¿ç”¨æŠ¥å‘Š</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># è‡ª v1.6.0 èµ·ä½¿ç”¨ yaml æ ¼å¼çš„é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># æœåŠ¡åç§°ï¼Œä¾‹å¦‚ï¼šhitokoto</span></span>
<span class="line"><span style="color:#22863A;">url</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># æœåŠ¡åœ°å€ï¼Œä¾‹å¦‚ï¼šhttps://v1.hitokoto.cn</span></span>
<span class="line"><span style="color:#22863A;">api_name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># æœåŠ¡è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼šcd-01-demo</span></span>
<span class="line"><span style="color:#22863A;">server</span><span style="color:#24292E;">: </span><span style="color:#6A737D;"># é…ç½® HTTP æœåŠ¡çš„ä¿¡æ¯</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">host</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">127.0.0.1</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># ç›‘å¬çš„åœ°å€</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">port</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;8000&#39;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># ç›‘å¬çš„ç«¯å£</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">compress_body</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># æ˜¯å¦ä½¿ç”¨ GZIP å‹ç¼©</span></span>
<span class="line"><span style="color:#22863A;">redis</span><span style="color:#24292E;">: </span><span style="color:#6A737D;"># é…ç½® Redis</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">host</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">127.0.0.1</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># Redis ä¸»æœºå</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">port</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">6379</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># Redis ç«¯å£</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">password</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># Redis å¯†ç </span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">database</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># Redis æ•°æ®åº“</span></span>
<span class="line"><span style="color:#22863A;">sentences_ab_switcher</span><span style="color:#24292E;">: </span><span style="color:#6A737D;"># æœ¬èŠ‚æ˜¯æœåŠ¡ AB å¼‚æ­¥æ›´æ–°çš„é…ç½®ï¼Œå¦‚æœæ‚¨ä¸çŸ¥é“è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¯·ä¿æŒé»˜è®¤</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">a</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># a çŠ¶æ€å¯¹åº”çš„ redis æ•°æ®åº“</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">b</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">2</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># b çŠ¶æ€å¯¹åº”çš„ redis æ•°æ®åº“</span></span>
<span class="line"><span style="color:#22863A;">log_level</span><span style="color:#24292E;">: </span><span style="color:#032F62;">info</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># æœ¬èŠ‚å·²åºŸå¼ƒï¼Œè¾“å‡ºåˆ°æ—¥è®°æ–‡ä»¶çš„ä¸€å¾‹ä¸º Errorï¼›è¾“å‡ºåˆ°ç»ˆç«¯ç”± flag \`-D\` æ§åˆ¶ã€‚</span></span>
<span class="line"><span style="color:#22863A;">remote_sentences_url</span><span style="color:#24292E;">: </span><span style="color:#032F62;">https://cdn.jsdelivr.net/gh/hitokoto-osc/sentences-bundle@latest/</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># è¯­å¥åº“åœ°å€ï¼Œé€šå¸¸é»˜è®¤å³å¯ã€‚å¦‚æœæ‚¨æƒ³ä½¿ç”¨æ‚¨è‡ªå·±æ‰“åŒ…éƒ¨ç½²çš„è¯­å¥åº“ï¼Œæ‚¨å¯ä»¥ä¿®æ”¹æ­¤é¡¹</span></span>
<span class="line"><span style="color:#22863A;">workers</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">0</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># å¯åŠ¨ Worker æ•°ç›®ã€‚0 è¡¨ç¤ºå¯åŠ¨å’Œ CPU æ ¸å¿ƒæ•°ç›¸åŒæ•°é‡çš„ Worker</span></span>
<span class="line"><span style="color:#22863A;">requests</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">enabled</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># æ˜¯å¦å¯ç”¨è¯·æ±‚æ•°ç›®ç»Ÿè®¡</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">hosts</span><span style="color:#24292E;">: </span><span style="color:#6A737D;"># éœ€è¦å•ç‹¬ç»Ÿè®¡çš„ä¸»æœºå</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#032F62;">v1.hitokoto.cn</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#032F62;">international.v1.hitokoto.cn</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#032F62;">api.a632079.me</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#032F62;">api.hitokoto.cn</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#032F62;">sslapi.hitokoto.cn</span></span>
<span class="line"><span style="color:#22863A;">telemetry</span><span style="color:#24292E;">: </span><span style="color:#6A737D;"># é¥æµ‹æœåŠ¡</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">performance</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># æ€§èƒ½ç›‘æ§</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">error</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># é”™è¯¯æŠ¥å‘Š</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">usage</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;"> </span><span style="color:#6A737D;"># ä½¿ç”¨æŠ¥å‘Š</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div>`,46),e=[o];function r(c,t,E,i,y,d){return n(),a("div",null,e)}const h=s(l,[["render",r]]);export{u as __pageData,h as default};
