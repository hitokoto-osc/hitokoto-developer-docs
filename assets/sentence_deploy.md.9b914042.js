import{_ as s,c as n,o as a,a as l}from"./app.6e031518.js";const d=JSON.parse('{"title":"éƒ¨ç½²å®ä¾‹","description":"","frontmatter":{},"headers":[{"level":2,"title":"ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²","slug":"ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²","link":"#ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²","children":[{"level":3,"title":"å®‰è£…ä¾èµ–","slug":"å®‰è£…ä¾èµ–","link":"#å®‰è£…ä¾èµ–","children":[]},{"level":3,"title":"å…‹éš†é¡¹ç›®","slug":"å…‹éš†é¡¹ç›®","link":"#å…‹éš†é¡¹ç›®","children":[]},{"level":3,"title":"å®‰è£…åŒ…","slug":"å®‰è£…åŒ…","link":"#å®‰è£…åŒ…","children":[]},{"level":3,"title":"å¯åŠ¨ç¨‹åº","slug":"å¯åŠ¨ç¨‹åº","link":"#å¯åŠ¨ç¨‹åº","children":[]},{"level":3,"title":"æŒä¹…åŒ–è¿›ç¨‹","slug":"æŒä¹…åŒ–è¿›ç¨‹","link":"#æŒä¹…åŒ–è¿›ç¨‹","children":[]}]},{"level":2,"title":"ä½¿ç”¨ Docker è¿è¡Œ","slug":"ä½¿ç”¨-docker-è¿è¡Œ","link":"#ä½¿ç”¨-docker-è¿è¡Œ","children":[{"level":3,"title":"ä½¿ç”¨ docker-compose å¯åŠ¨æœåŠ¡","slug":"ä½¿ç”¨-docker-compose-å¯åŠ¨æœåŠ¡","link":"#ä½¿ç”¨-docker-compose-å¯åŠ¨æœåŠ¡","children":[]}]},{"level":2,"title":"é…ç½®æ–‡ä»¶","slug":"é…ç½®æ–‡ä»¶","link":"#é…ç½®æ–‡ä»¶","children":[]}],"relativePath":"sentence/deploy.md","lastUpdated":1671333382000}'),p={name:"sentence/deploy.md"},e=l(`<h1 id="éƒ¨ç½²å®ä¾‹" tabindex="-1">éƒ¨ç½²å®ä¾‹ <a class="header-anchor" href="#éƒ¨ç½²å®ä¾‹" aria-hidden="true">#</a></h1><blockquote><p>è‡ª <code>v1.5.0</code> æ‚¨å¯ä»¥éƒ¨ç½²æ‚¨è‡ªå·±çš„å®ä¾‹ï¼Œè¿™ä¸ªæ–¹æ¡ˆååˆ†é€‚åˆè®¿é—®é‡å¤§ï¼Œç«™ç‚¹ç§å¯†æ€§é«˜çš„éœ€æ±‚ã€‚<br><strong>è¯·æ³¨æ„ï¼š</strong> å®ä¾‹ä¸­å­˜åœ¨ <strong>é¥æµ‹</strong>æœåŠ¡ï¼Œå°†ä¼šæ”¶é›†å®ä¾‹çš„æ€§èƒ½ã€é”™è¯¯ã€çŠ¶æ€çŠ¶å†µæ–¹é¢çš„æ•°æ®ï¼Œæ‚¨å¯ä»¥è‡ªç”±é€‰æ‹©å…³é—­é¥æµ‹åŠŸèƒ½ã€‚</p></blockquote><h2 id="ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²" tabindex="-1">ä¼ ç»Ÿæ–¹å¼éƒ¨ç½² <a class="header-anchor" href="#ä¼ ç»Ÿæ–¹å¼éƒ¨ç½²" aria-hidden="true">#</a></h2><h3 id="å®‰è£…ä¾èµ–" tabindex="-1">å®‰è£…ä¾èµ– <a class="header-anchor" href="#å®‰è£…ä¾èµ–" aria-hidden="true">#</a></h3><p>é¦–å…ˆæ‚¨å¾—ç¡®ä¿æ‚¨çš„ç¯å¢ƒä¸­å­˜åœ¨ <code>Redis</code>ï¼Œ<code>Node.js</code>ï¼Œ<code>yarn</code>ã€‚ç”±äºç½‘ä¸Šæ–¹æ³•ä¼—å¤šï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ å¦‚æœæ‚¨æ˜¯å°ç™½ï¼Œä¸æ˜¯å¾ˆæ˜ç™½æ€ä¹ˆå®‰è£…ç¯å¢ƒï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å†™çš„ NodeBB å®‰è£…æ–‡æ¡£ä¸­ <strong>é…ç½®ç¯å¢ƒ</strong> çš„éƒ¨åˆ†ï¼š<a href="https://docs.nodebb-cn.org" target="_blank" rel="noreferrer">https://docs.nodebb-cn.org</a></p><p><strong>è¯·ç¡®è®¤ï¼šæ‚¨çš„ yarn ç‰ˆæœ¬æ˜¯å¦å¤§äºæˆ–ç­‰äº 1.22.4ï¼Œå¦‚æœä¸æ˜¯â€”â€”è¯·æ›´æ–°ã€‚å¦åˆ™ï¼Œé¡¹ç›®å°†æ— æ³•æ­£ç¡®å®‰è£…å¯åŠ¨ã€‚</strong></p><h3 id="å…‹éš†é¡¹ç›®" tabindex="-1">å…‹éš†é¡¹ç›® <a class="header-anchor" href="#å…‹éš†é¡¹ç›®" aria-hidden="true">#</a></h3><p>åœ¨ä½ æƒ³è¦çš„ä½ç½®å…‹éš†æœ¬é¡¹ç›®</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">git</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clone</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://github.com/hitokoto-osc/hitokoto-api.git</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># å¦‚æœæ‚¨æˆ–æ‚¨çš„æœºå™¨å¤„äºå›½å†…ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™ä¸ªåœ°å€ä»£æ›¿ï¼šhttps://gitee.com/hitokoto-osc/hitokoto-api.git</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="å®‰è£…åŒ…" tabindex="-1">å®‰è£…åŒ… <a class="header-anchor" href="#å®‰è£…åŒ…" aria-hidden="true">#</a></h3><p>Node.js ç¨‹åºé€šå¸¸éœ€è¦å¤§é‡é€šè¿‡åŒ…ç®¡ç†å®‰è£…çš„åŒ…æ¥è¿è¡Œã€‚æœ¬ç¨‹åºä¹Ÿä¸ä¾‹å¤–ï¼Œå› æ­¤ï¼Œæ‚¨éœ€è¦åƒè¿™æ ·å®‰è£…åŒ…ï¼š</p><blockquote><p><strong>è¯·æ³¨æ„ï¼š</strong> æœ¬é¡¹ç›®è¦æ±‚ <code>Node.js</code> ç‰ˆæœ¬è‡³å°‘ä¸º 14 ï¼ˆå½“å‰æœ€æ–°çš„ LTS ç‰ˆæœ¬ï¼‰ï¼› è‡ª <code>v1.6.0</code> èµ·ï¼Œé¡¹ç›®è¦æ±‚ä½¿ç”¨ yarn berry ç®¡ç†åŒ…ä¾èµ–ã€‚</p></blockquote><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ä¸ºäº†é˜²æ­¢æ„å¤–ï¼Œæˆ‘ä»¬éœ€è¦å°†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„åŒ…éƒ½å®‰è£…ã€‚å¦‚æœæ‚¨ç†Ÿæ‚‰æœ¬ç¨‹åºçš„è¯ï¼Œå¯ä»¥åªå®‰è£…ç”Ÿäº§ç¯å¢ƒçš„åŒ…ç›´æ¥éƒ¨ç½²ã€‚</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="å¯åŠ¨ç¨‹åº" tabindex="-1">å¯åŠ¨ç¨‹åº <a class="header-anchor" href="#å¯åŠ¨ç¨‹åº" aria-hidden="true">#</a></h3><p>å—¯ï¼Œè®©æˆ‘ä»¬è¯•ä¸€ä¸‹èƒ½ä¸èƒ½å¯åŠ¨ï¼š</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">yarn</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># è®©æˆ‘ä»¬ä½¿ç”¨å¼€å‘æ¨¡å¼çœ‹çœ‹èƒ½ä¸èƒ½è·‘å¾—èµ·æ¥ï¼Œç¨‹åºä¼šè‡ªåŠ¨ç”Ÿæˆé»˜è®¤çš„é…ç½®æ–‡ä»¶ã€‚æœ‰å…³é…ç½®æ–‡ä»¶çš„é…ç½®ï¼Œæˆ‘ä»¬å°†åœ¨ç¨åä¸€èŠ‚è¯´æ˜ã€‚</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä½ ä¼šçœ‹åˆ°å±å¹•åœ¨åˆ·åˆ·åˆ·å¾—åˆ·æ—¥è®°ï¼Œå½“ä½ çœ‹åˆ°ç±»ä¼¼è¿™æ ·ä¸€æ¡æ—¶ï¼Œæ„å‘³ç€ç¨‹åºèƒ½æˆåŠŸè¿è¡Œï¼š<code>info: [core] Web Server is started, listening on port: 8000</code></p><p>å¦‚æœç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œè¯·æ£€æŸ¥ä¸€ä¸‹å“ªå„¿æ²¡æå¥½ï¼ˆä¾‹å¦‚ï¼šæ²¡å¯åŠ¨ redisï¼ŒNode.js ç‰ˆæœ¬è¿‡ä½ï¼‰ã€‚å¦‚æœè‡ªå·±æä¸å®šçš„è¯ï¼Œå¯ä»¥åŠ å…¥æˆ‘ä»¬çš„å¼€å‘è€…ç¾¤è®¨è®ºä¸€ä¸‹ã€‚å¦‚æœæ‚¨ç¡®ä¿¡æ˜¯ç¨‹åºçš„é—®é¢˜çš„è¯ï¼Œè¯·å°è¯•æ›´æ–°ç¨‹åºã€‚å¦‚æœå·²ç»æœ€æ–°ï¼Œæ¬¢è¿å‘æˆ‘ä»¬æäº¤ issuesã€‚</p><h3 id="æŒä¹…åŒ–è¿›ç¨‹" tabindex="-1">æŒä¹…åŒ–è¿›ç¨‹ <a class="header-anchor" href="#æŒä¹…åŒ–è¿›ç¨‹" aria-hidden="true">#</a></h3><p>ä¸ºäº†ä½¿æˆ‘ä»¬çš„ç¨‹åºèƒ½é•¿æ—¶é—´ç¨³å®šè¿è¡Œï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä¸€ä¸ªè¿›ç¨‹ç®¡ç†å·¥å…·æ¥ç®¡ç†è¿›ç¨‹ã€‚æœ¬ä¾‹ç”¨çš„æ˜¯ <code>pm2</code>ã€‚æœ‰å…³ <code>pm2</code> çš„ä»‹ç»ç½‘ä¸Šæœ‰å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°ï¼Œåªç®€å•è®²è®²æ€ä¹ˆä½¿ç”¨ï¼ˆè¿ç”¨äºæœ¬æ¥å£ï¼‰</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… <code>pm2</code>ã€‚</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pm2</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ç”±äºé¡¹ç›®å†…é»˜è®¤ç¯å¢ƒä¸º yarn v2ï¼Œä¸ºäº†é¿å…å¹²æ‰°ï¼Œè¿™é‡Œé‡‡ç”¨ NPM å®‰è£…</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é…ç½® <code>pm2</code> è‡ªå¯åŠ¨</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">startup</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç”±äºé¡¹ç›®å·²ç»æä¾›äº†é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨é…ç½®æ–‡ä»¶å¯åŠ¨è¯­å¥æ¥å£æœåŠ¡</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ecosystem.config.js</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--env</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¿å­˜æŒä¹…åŒ–åˆ—è¡¨</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">pm2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">save</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="ä½¿ç”¨-docker-è¿è¡Œ" tabindex="-1">ä½¿ç”¨ Docker è¿è¡Œ <a class="header-anchor" href="#ä½¿ç”¨-docker-è¿è¡Œ" aria-hidden="true">#</a></h2><p>Docker æ˜¯ç›®å‰éå¸¸æµè¡Œçš„å®¹å™¨ç®¡ç†å·¥å…·ï¼Œèƒ½å¾ˆæ–¹ä¾¿ï¼Œç®€å•å¾—æ“ä½œå®ä¾‹ã€‚Docker çš„ç›¸å…³ç©æ³•æˆ‘ä»¬å°±ä¸å±•å¼€äº†ï¼Œæˆ‘ä»¬å°±ä»‹ç»æœ€æ–¹ä¾¿çš„ç”¨æ³•ã€‚å¦‚æœæ‚¨æ˜¯å°ç™½çš„è¯ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªæ–¹æ³•ã€‚</p><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¯å¢ƒä¸­å®‰è£…å¥½ Redisã€‚å¦‚æœä¸ä¼šçš„è¯ï¼Œè¯·çœ‹ä¸ŠèŠ‚çš„é‚£ä¸ªåœ°å€çš„æ•™ç¨‹æˆ–è€…ç½‘ä¸Šæœä¸€ä¸‹ã€‚</p><p>ç„¶å...</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">-v </span><span style="color:#C3E88D;">/path/to/your/data/dir:/usr/src/app/data</span><span style="color:#A6ACCD;"> \\ </span><span style="color:#C3E88D;">#</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">è¯·æ›¿æ¢</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/path/to/your/data/dir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ä¸ºæ‚¨æƒ³å­˜å‚¨æ¥å£æŒä¹…åŒ–æ•°æ®çš„ç›®å½•ç»å¯¹ä½ç½®</span></span>
<span class="line"><span style="color:#FFCB6B;">--network</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">host</span><span style="color:#A6ACCD;"> \\</span></span>
<span class="line"><span style="color:#A6ACCD;">hitokoto/api:latest</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å—¯ï¼Œå¯åŠ¨å®Œæ¯•ã€‚æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼Ÿ</p><p>å…¶ä»–å¯åŠ¨æ–¹å¼ä½ å¯ä»¥è‡ªå·±æ‘¸ç´¢ä¸€ä¸‹ï¼Œæ¯”å¦‚è¯´ï¼Œä¸ç”¨ host ç½‘ç»œæ€ä¹ˆè¿è¡Œã€‚</p><h3 id="ä½¿ç”¨-docker-compose-å¯åŠ¨æœåŠ¡" tabindex="-1">ä½¿ç”¨ docker-compose å¯åŠ¨æœåŠ¡ <a class="header-anchor" href="#ä½¿ç”¨-docker-compose-å¯åŠ¨æœåŠ¡" aria-hidden="true">#</a></h3><p>é¡¹ç›®ä¹Ÿæä¾›äº† <code>docker-compose</code> æ–‡ä»¶ï¼ˆåœ¨ä»“åº“ä¸­ï¼‰ï¼Œä¸ºäº†èŠ‚çº¦æ‚¨çš„æ—¶é—´ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸‹è¿™ä»½é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hitokoto_api</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">driver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bridge</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hitokoto_api</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">hitokoto_api</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">hitokoto/api:release</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">container_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">hitokoto_api</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hostname</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">hitokoto_api</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">NODE_ENV</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">production</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># æœåŠ¡é…ç½®</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://v1.hitokoto.cn</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># è¯·ä¿®æ”¹ä¸ºæ‚¨æƒ³è¦éƒ¨ç½²çš„åŸŸå</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">api_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sh-01-X23Hwoc</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æ”¹ä¸€ä¸ªå¥½å¬çš„æ ‡è¯†å§</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">requests.hosts</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">[&#39;v1.hitokoto.cn&#39;]</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æ”¹æˆä½ æƒ³ç»Ÿè®¡çš„ä¸»æœºååˆ—è¡¨</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">redis.host</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># Redis è¿æ¥åœ°å€ï¼Œå¦‚æœæ‚¨ä½¿ç”¨æœ¬æ–‡ä»¶æä¾›çš„ Redis çš„è¯æ‚¨æ— éœ€ä¿®æ”¹æ­¤é¡¹</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">redis.port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6379</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># Redis è¿æ¥ç«¯å£</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># redis.password:</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># redis.database: 0</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">8000:8000</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">links</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unless-stopped</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./etc/api:/usr/src/app/data</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">redis</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">networks</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">hitokoto_api</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">unless-stopped</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">container_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hostname</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./etc/redis.conf:/etc/redis/redis.conf</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ä¸€å®šè¦è®°å¾—æŠŠ redis.conf å…ˆæ”¾åœ¨è¿™ä¸ªä½ç½®å“¦</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./data/redis:/data</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">command</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis-server /etc/redis/redis.conf</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># ports:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">#  - 6379:6379 # å¦‚æœæœ‰å¿…è¦è¯·å–æ¶ˆæ³¨é‡Šæœ¬è¡Œ</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><p>ç„¶åæˆ‘ä»¬åªéœ€è¦æ–°å»ºä¸ªç›®å½•ï¼Œæ¯”å¦‚è¯´ <code>hitokoto_api</code>:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">mkdir hitokoto_api &amp;&amp; cd hitokoto_api</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¯åŠ¨æœåŠ¡ï¼š</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">docker-compose up -d</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ğŸ˜„ æ˜¯ä¸æ˜¯å¾ˆç®€å•å‘¢ï¼Ÿå˜»å˜»ã€‚</p><h2 id="é…ç½®æ–‡ä»¶" tabindex="-1">é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#é…ç½®æ–‡ä»¶" aria-hidden="true">#</a></h2><p>ä»¥ä¸‹æ˜¯å¯¹å¸¸ç”¨é…ç½®çš„ç®€å•ä»‹ç»ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¯·å»é™¤æ‰æ³¨è§£éƒ¨åˆ†ã€‚</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># è‡ª v1.6.0 èµ·ä½¿ç”¨ yaml æ ¼å¼çš„é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æœåŠ¡åç§°ï¼Œä¾‹å¦‚ï¼šhitokoto</span></span>
<span class="line"><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æœåŠ¡åœ°å€ï¼Œä¾‹å¦‚ï¼šhttps://v1.hitokoto.cn</span></span>
<span class="line"><span style="color:#F07178;">api_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æœåŠ¡è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼šcd-01-demo</span></span>
<span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># é…ç½® HTTP æœåŠ¡çš„ä¿¡æ¯</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">host</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">127.0.0.1</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ç›‘å¬çš„åœ°å€</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">8000</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ç›‘å¬çš„ç«¯å£</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">compress_body</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æ˜¯å¦ä½¿ç”¨ GZIP å‹ç¼©</span></span>
<span class="line"><span style="color:#F07178;">redis</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># é…ç½® Redis</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">host</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">127.0.0.1</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># Redis ä¸»æœºå</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6379</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># Redis ç«¯å£</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">password</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># Redis å¯†ç </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">database</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># Redis æ•°æ®åº“</span></span>
<span class="line"><span style="color:#F07178;">sentences_ab_switcher</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æœ¬èŠ‚æ˜¯æœåŠ¡ AB å¼‚æ­¥æ›´æ–°çš„é…ç½®ï¼Œå¦‚æœæ‚¨ä¸çŸ¥é“è¿™ä¸ªæ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¯·ä¿æŒé»˜è®¤</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># a çŠ¶æ€å¯¹åº”çš„ redis æ•°æ®åº“</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># b çŠ¶æ€å¯¹åº”çš„ redis æ•°æ®åº“</span></span>
<span class="line"><span style="color:#F07178;">log_level</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æœ¬èŠ‚å·²åºŸå¼ƒï¼Œè¾“å‡ºåˆ°æ—¥è®°æ–‡ä»¶çš„ä¸€å¾‹ä¸º Errorï¼›è¾“å‡ºåˆ°ç»ˆç«¯ç”± flag \`-D\` æ§åˆ¶ã€‚</span></span>
<span class="line"><span style="color:#F07178;">remote_sentences_url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://cdn.jsdelivr.net/gh/hitokoto-osc/sentences-bundle@latest/</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># è¯­å¥åº“åœ°å€ï¼Œé€šå¸¸é»˜è®¤å³å¯ã€‚å¦‚æœæ‚¨æƒ³ä½¿ç”¨æ‚¨è‡ªå·±æ‰“åŒ…éƒ¨ç½²çš„è¯­å¥åº“ï¼Œæ‚¨å¯ä»¥ä¿®æ”¹æ­¤é¡¹</span></span>
<span class="line"><span style="color:#F07178;">workers</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># å¯åŠ¨ Worker æ•°ç›®ã€‚0 è¡¨ç¤ºå¯åŠ¨å’Œ CPU æ ¸å¿ƒæ•°ç›¸åŒæ•°é‡çš„ Worker</span></span>
<span class="line"><span style="color:#F07178;">requests</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">enabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æ˜¯å¦å¯ç”¨è¯·æ±‚æ•°ç›®ç»Ÿè®¡</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">hosts</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># éœ€è¦å•ç‹¬ç»Ÿè®¡çš„ä¸»æœºå</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">v1.hitokoto.cn</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">international.v1.hitokoto.cn</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">api.a632079.me</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">api.hitokoto.cn</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sslapi.hitokoto.cn</span></span>
<span class="line"><span style="color:#F07178;">telemetry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># é¥æµ‹æœåŠ¡</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">performance</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># æ€§èƒ½ç›‘æ§</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">error</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># é”™è¯¯æŠ¥å‘Š</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">usage</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨æŠ¥å‘Š</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div>`,46),o=[e];function r(c,t,i,y,C,D){return a(),n("div",null,o)}const b=s(p,[["render",r]]);export{d as __pageData,b as default};
